{
  "hash": "de08f4e68e3f01ea64bc782d253c5bef",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Advanced Visualizations\"\nauthor: \"Your Name\"\ndate: today\nformat:\n  html:\n    code-fold: false\n    toc: true\n---\n\n# Introduction\n\nLet's create some advanced visualizations to better understand the data!\n\n## Load Libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyverse' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggplot2' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tibble' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'readr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'purrr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'dplyr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'stringr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'forcats' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'lubridate' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nâ”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€\nâœ” dplyr     1.1.4     âœ” readr     2.1.5\nâœ” forcats   1.0.1     âœ” stringr   1.6.0\nâœ” ggplot2   4.0.0     âœ” tibble    3.3.0\nâœ” lubridate 1.9.4     âœ” tidyr     1.3.1\nâœ” purrr     1.2.0     \nâ”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\nâœ– dplyr::filter() masks stats::filter()\nâœ– dplyr::lag()    masks stats::lag()\nâ„¹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(knitr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'knitr' was built under R version 4.5.2\n```\n\n\n:::\n:::\n\n\n## Load Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake <- readRDS(\"../data/processed/earthquake_clean.rds\")\ntop_10_states <- earthquake %>%\n  count(State, sort = TRUE) %>%\n  head(10) %>%\n  pull(State)\n```\n:::\n\n\n# Combined Visualizations\n\n## Magnitude and Distance by State\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  filter(State %in% top_10_states) %>%\n  ggplot(aes(x = Distance_Category, y = Magnitude, color = State)) +\n  geom_point(alpha = 0.6, size = 2) +\n  facet_wrap(~State) +\n  labs(\n    title = \"Magnitude vs Distance by State\",\n    x = \"Distance (km)\",\n    y = \"Magnitude\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 4413 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n**Observation:** Both states show similar patterns - magnitude is consistent across distances.\n\n## Multi-Variable Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  filter(!is.na(Intensity)) %>%\n  ggplot(aes(x = Distance_km, y = Intensity, size = Magnitude, color = State)) +\n  geom_point(alpha = 0.6) +\n  scale_size_continuous(range = c(2, 8)) +\n  labs(\n    title = \"Distance, Intensity, Magnitude, and State Combined\",\n    x = \"Distance (km)\",\n    y = \"Intensity\",\n    size = \"Magnitude\",\n    color = \"State\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 7875 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n# Density Plots\n\n## Magnitude Density by State\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  filter(State %in% top_10_states) %>%\n  ggplot(aes(x = Magnitude, fill = State)) +\n    geom_density(alpha = 0.5) +\n    labs(\n      title = \"Magnitude Distribution by State\",\n      x = \"Magnitude\",\n      y = \"Density\"\n    ) +\n    theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 4413 rows containing non-finite outside the scale range\n(`stat_density()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Distance Density by Distance Category\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(earthquake, aes(x = Distance_Category, fill = Distance_Category)) +\n  geom_density(alpha = 0.5) +\n  labs(\n    title = \"Distance Distribution by Category\",\n    x = \"Distance (km)\",\n    y = \"Density\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n# Heatmap Visualization\n\n## Intensity Heatmap by State and Distance\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  filter(State %in% top_10_states) %>%\n  filter(!is.na(Intensity)) %>%\n  group_by(State, Distance_Category) %>%\n  summarise(Mean_Intensity = mean(Intensity), .groups = \"drop\") %>%\n  ggplot(aes(x = Distance_Category, y = State, fill = Mean_Intensity)) +\n  geom_tile(color = \"white\") +\n  geom_text(aes(label = round(Mean_Intensity, 1)), color = \"white\", size = 5) +\n  scale_fill_gradient(low = \"blue\", high = \"red\") +\n  labs(\n    title = \"Mean Intensity by State and Distance\",\n    x = \"Distance Category\",\n    y = \"State\",\n    fill = \"Mean Intensity\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n# Violin Plots\n\n## Magnitude Distribution with Violin Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  filter(State %in% top_10_states) %>%\n  ggplot(aes(x = State, y = Magnitude, fill = State)) +\n    geom_violin(alpha = 0.7) +\n    geom_boxplot(width = 0.1, fill = \"white\", alpha = 0.5) +\n    labs(\n      title = \"Magnitude Distribution by State (Violin Plot)\",\n      x = \"State\",\n      y = \"Magnitude\"\n    ) +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 4413 rows containing non-finite outside the scale range\n(`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 4413 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n# Bubble Chart\n\n## Location Popularity and Distance\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  group_by(Location, State) %>%\n  summarise(\n    Count = n(),\n    Mean_Distance = mean(Distance_km, na.rm = TRUE),\n    Mean_Intensity = mean(Intensity, na.rm = TRUE),\n    .groups = \"drop\"\n  ) %>%\n  filter(Count > 5) %>%\n  ggplot(aes(x = Mean_Distance, y = Count, size = Mean_Intensity, color = State)) +\n  geom_point(alpha = 0.7) +\n  scale_size_continuous(range = c(3, 12)) +\n  labs(\n    title = \"Recording Locations: Distance, Frequency, and Intensity\",\n    x = \"Mean Distance from Epicenter (km)\",\n    y = \"Number of Observations\",\n    size = \"Mean Intensity\",\n    color = \"State\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 21 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n# Bar Chart with Error Bars\n\n## Mean Intensity by Distance Category (with Standard Error)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nearthquake %>%\n  filter(!is.na(Intensity)) %>%\n  group_by(Distance_Category) %>%\n  summarise(\n    Mean = mean(Intensity),\n    SE = sd(Intensity) / sqrt(n()),\n    .groups = \"drop\"\n  ) %>%\n  ggplot(aes(x = Distance_Category, y = Mean, fill = Distance_Category)) +\n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = Mean - SE, ymax = Mean + SE), width = 0.2) +\n  labs(\n    title = \"Mean Intensity by Distance (with Standard Error)\",\n    x = \"Distance Category\",\n    y = \"Mean Intensity\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](06-visualizations_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n# Summary Dashboard\n\n## Key Metrics Panel\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate key metrics\ntotal_obs <- nrow(earthquake)\nunique_events <- n_distinct(earthquake$DateTime, earthquake$Epicenter_Lat, earthquake$Epicenter_Lon)\nmean_mag <- round(mean(earthquake$Magnitude, na.rm = TRUE), 2)\nmax_distance <- round(max(earthquake$Distance_km, na.rm = TRUE), 0)\nstates_covered <- length(unique(earthquake$State))\n\ncat(\"EARTHQUAKE ANALYSIS DASHBOARD\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nEARTHQUAKE ANALYSIS DASHBOARD\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"===============================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n===============================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ðŸ“Š Total Observations:\", total_obs, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nðŸ“Š Total Observations: 142083 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ðŸŒ Unique Events:\", unique_events, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nðŸŒ Unique Events: 12924 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ðŸ“ˆ Mean Magnitude:\", mean_mag, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nðŸ“ˆ Mean Magnitude: 7.41 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ðŸ“ Max Distance:\", max_distance, \"km\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nðŸ“ Max Distance: 9930 km\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ðŸ—ºï¸  States Covered:\", states_covered, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nðŸ—ºï¸  States Covered: 67 \n```\n\n\n:::\n:::\n\n\n\n**Next:** Go to [Conclusions](07-conclusions.qmd) â†’",
    "supporting": [
      "06-visualizations_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}