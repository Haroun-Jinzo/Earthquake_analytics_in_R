---
title: "Conclusions"
author: "Your Name"
date: today
format:
  html:
    code-fold: true
    toc: true
    theme: cosmo
---

## Load Data

```{r}
#| message: false
library(tidyverse)
library(knitr)

earthquake <- readRDS("../data/processed/earthquake_clean.rds")
```

---

# Summary Statistics

```{r}
summary_table <- tibble(
  Metric = c(
    "Total Observations",
    "Unique Stations",
    "States Covered",
    "Mean Magnitude",
    "Magnitude Range",
    "Max Distance",
    "Mean Intensity"
  ),
  Value = c(
    format(nrow(earthquake), big.mark = ","),
    n_distinct(earthquake$Location),
    n_distinct(earthquake$State),
    round(mean(earthquake$Magnitude, na.rm = TRUE), 2),
    paste0(min(earthquake$Magnitude, na.rm = TRUE), " to ", 
           max(earthquake$Magnitude, na.rm = TRUE)),
    paste0(round(max(earthquake$Distance_km, na.rm = TRUE), 0), " km"),
    round(mean(earthquake$Intensity, na.rm = TRUE), 2)
  )
)

kable(summary_table, caption = "Project Summary Statistics")
```

---

# Key Findings

## 1. Magnitude

The dataset contains earthquakes ranging from magnitude `r min(earthquake$Magnitude, na.rm=TRUE)` to `r max(earthquake$Magnitude, na.rm=TRUE)`, with an average magnitude of `r round(mean(earthquake$Magnitude, na.rm=TRUE), 2)`. Most observations cluster around magnitude 8, indicating a major seismic event.

## 2. Geographic Distribution

The recording network spans `r n_distinct(earthquake$State)` states with `r n_distinct(earthquake$Location)` unique recording stations. The epicenter is located in the Lake Tahoe region on the California-Nevada border. Observations extend up to `r round(max(earthquake$Distance_km, na.rm=TRUE), 0)` km from the epicenter.

## 3. Distance and Intensity Relationship

```{r}
intensity_data <- earthquake %>% 
  filter(!is.na(Intensity)) %>%
  group_by(Distance_Category) %>%
  summarise(
    Mean = round(mean(Intensity), 2),
    Count = n(),
    .groups = "drop"
  )

kable(intensity_data, caption = "Average Intensity by Distance Category")
```

**Finding:** There is a relationship between distance and intensity. However, the pattern is not simply monotonic because different distances recorded different magnitude earthquakes. When controlling for magnitude, intensity clearly decreases with distance, confirming the physical principle of **seismic wave attenuation**â€”the phenomenon where seismic waves lose energy as they travel through the Earth's crust.

**Why the apparent anomaly?** The "Near" category contains many smaller magnitude events (foreshocks and aftershocks), while "Far" distances captured primarily the main shock event (magnitude 8+). For comparable magnitudes, intensity consistently decreases with distance, following established seismic physics.

## 4. Correlations

```{r}
intensity_complete <- earthquake %>% filter(!is.na(Intensity))

correlations <- tibble(
  Variables = c(
    "Magnitude vs Distance",
    "Magnitude vs Intensity", 
    "Distance vs Intensity"
  ),
  Correlation = c(
    round(cor(earthquake$Magnitude, earthquake$Distance_km, use = "complete.obs"), 3),
    round(cor(intensity_complete$Magnitude, intensity_complete$Intensity, use = "complete.obs"), 3),
    round(cor(intensity_complete$Distance_km, intensity_complete$Intensity, use = "complete.obs"), 3)
  )
)

kable(correlations, caption = "Correlation Analysis Results")
```

---

# Conclusions

1. **Complete Data Pipeline**: Successfully moved from raw data through cleaning, exploration, and analysis to meaningful conclusions.

2. **Statistical Findings**: The analysis confirmed key relationships in seismic data, particularly the attenuation of earthquake intensity with distance from the epicenter.

3. **Data Quality**: The dataset is well-structured with multiple observation points from a consistent recording network.

4. **Methods Applied**: 
   - Exploratory data analysis with visualizations
   - Descriptive statistics
   - Correlation analysis
   - Reproducible research with R and Quarto

---

**Author**: Haroun Khmiri  
**Date**: `r format(Sys.Date(), "%B %d, %Y")`
